{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://dev.wandb.com/schema/testlib-config.json",
    "title": "TestlibConfig",
    "description": "Weights & Biases Testlib Configuration.",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "id": {
            "type": "string",
            "description": "Test id"
        },
        "assert": {
            "type": "array",
            "items": {
                "type": "object"
            }
        },
        "var": {
            "type": "array",
            "items": {
                "type": "object"
            }
        },
        "env": {
            "type": "array",
            "items": {
                "type": "object"
            }
        },
        "command-args": {
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "permute": {
            "type": "object"
        },
        "check-ext-wandb": {
            "type": "object",
            "properties": {
                "run": {
                    "type": "array",
                    "description": "List of runs expected",
                    "items": {
                        "type": "object",
                        "properties": {
                            "exit": {
                                "type": "number",
                                "format": "integer",
                                "description": "Run exit",
                                "multipleOf": 1.0
                            },
                            "config": {"type": "object", "description": "Config dictionary"},
                            "summary": {"type": "object", "description": "Summary dictionary"},
                            "ignore_extra_config_keys": {
                                "type": "boolean",
                                "description": "Whether to ignore keys present in the actual config that are not listed in the expected config",
                                "default": false
                            },
                            "ignore_extra_summary_keys": {
                                "type": "boolean",
                                "description": "Whether to ignore keys present in the actual summary that are not listed in the expected summary",
                                "default": false
                            }
                        },
                        "additionalProperties": false
                    }
                }
            }
        }
    }
}
